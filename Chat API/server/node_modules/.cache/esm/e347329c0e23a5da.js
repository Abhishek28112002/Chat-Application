let chat,express,cors,mongoose;_0e2‍.w("./controllers/chat.js",[["default",["chat"],function(v){chat=v}]]);_0e2‍.w("express",[["default",["express"],function(v){express=v}]]);_0e2‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_0e2‍.w("dotenv/config");_0e2‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);// Main chat server runner







const app = express();
var siofu = require("socketio-file-upload");
app.use(siofu.router)
const http = require("http").createServer(app);
const Url="mongodb+srv://abhi2811:abhi28112002%40@cluster0.5hpksjv.mongodb.net/?retryWrites=true&w=majority"

mongoose.connect(Url, (err) => {
  if (err) {
    _0e2‍.g.console.log("Database connection error: ", err);
  } else {
    console.log("Chat API Connected to database");
    mongoose.pluralize(null);
  }
});
const io = require("socket.io")(http, {
  path: "/socket.io",
  cors: {
    origin: ["http://localhost:3000"],
    methods: ["GET", "POST"],
    allowedHeaders: ["content-type"],
  },
});

//Middlewares
app.use(cors());
app.use(express.json({ limit: "5mb" }));
app.use(express.urlencoded({ extended: true }));

//api main
app.get("/api", (req, res) => {
  res.send("API implementation goes here");
});

// socket implementation
chat(io);

const port = 8000;
http.listen(port, () => {
  _0e2‍.g.console.log("Chat server running on port ", port);
});
